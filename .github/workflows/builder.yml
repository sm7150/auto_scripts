name: ROM Builder

on: push

jobs: 
  build:
    runs-on: ice

    steps:
       - name: Dependencies Clone & Fetch
         run: |
              cd cr10
              git clone -b cr10-r1q https://github.com/sm7150/android_device_samsung_a70q.git device/samsung/r1q
              git clone https://github.com/sm7150/r1q_camera_derps.git device/samsung/camera/r1q

       - name: Build
         run: |
              cd cr10; pwd; ls; export JAVA_TOOL_OPTIONS=-Xmx10g
              . build/envsetup.sh
              lunch lineage_r1q-user
              brunch lineage_r1q-user

       - name: Release
         run: |
              cd cr10/device/samsung/camera/r1q
              hub release create -a ../../../../out/target/product/r1q/crDroidAndroid-10.0-20210206-r1q-v6.14.zip -m "crDroidAndroid-10.0-20210206-r1q-v6.14.zip" idk-6.14   
